"use strict";(()=>{var e={};e.id=473,e.ids=[473],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6005:e=>{e.exports=require("node:crypto")},87561:e=>{e.exports=require("node:fs")},93977:e=>{e.exports=require("node:fs/promises")},49411:e=>{e.exports=require("node:path")},26490:(e,r,o)=>{o.r(r),o.d(r,{originalPathname:()=>U,patchFetch:()=>x,requestAsyncStorage:()=>V,routeModule:()=>M,serverHooks:()=>A,staticGenerationAsyncStorage:()=>T});var s={};o.r(s),o.d(s,{GET:()=>_});var t=o(49303),n=o(88716),a=o(60670),i=o(87070),p=o(49411),u=o.n(p),c=o(93977),l=o.n(c),d=o(15058),m=o(76072),g=o(24910),y=o(69560);let f=new y.g;class w{async getViewComfyApp(e,r){let o=await fetch(`${f.getViewComfyCloudApiUrl()}/viewcomfy-app/app/${e}`,{method:"GET",headers:{Authorization:`Bearer ${r}`}});if(!o.ok){if(404===o.status){let e=await o.json(),r=e.errorMsg||"ViewComfy app not found",s=e.errorDetails?[e.errorDetails]:["ViewComfy app not found"],t=new m.Gp({message:r,errorType:m.ZB.VIEW_MODE_MISSING_APP_ID,errors:s});throw console.error(t),t}{let e=new m.Gp({message:"Failed to fetch ViewComfy app",errorType:m.ZB.VIEW_MODE_MISSING_APP_ID,errors:["Failed to fetch ViewComfy app"]});throw console.error(e),e}}return await o.json()}async getViewComfyAppSecrets(e,r){let o=await fetch(`${f.getViewComfyCloudApiUrl()}/viewcomfy-app/secrets/${e}`,{method:"GET",headers:{Authorization:`Bearer ${r}`}});if(!o.ok){let e=await o.json(),r=e.errorMsg||"Failed to fetch ViewComfy app secrets",s=e.errorDetails?[e.errorDetails]:["Failed to fetch ViewComfy app secrets"],t=new m.Gp({message:r,errorType:m.ZB.VIEW_MODE_MISSING_APP_ID,errors:s});throw console.error(t),t}return await o.json()}}let E=new m.yr,I=new y.g,h=new w;async function _(e){if(I.isUserManagementEnabled()){let{userId:r,getToken:o}=await (0,g.I)();if(!r)return new Response("Unauthorized",{status:401});let s=await o();if(!s)return new Response("Unauthorized: Token is missing",{status:401});let t=e.nextUrl.searchParams.get("appId");if(!t){let e=new m.Gp({message:"App ID is required",errorType:m.ZB.VIEW_MODE_MISSING_APP_ID,errors:["You're missing the App ID in the URL, make sure to copy it from the ViewComfy Dashboard","If you're a new user you need to get access to the ViewComfy Apps"]}),r=E.getErrorResponse(e);return i.NextResponse.json(r,{status:422})}try{let e=await h.getViewComfyApp(t,s);return i.NextResponse.json({viewComfyJSON:e.viewComfyJson})}catch(r){let e=E.getErrorResponse(r);return i.NextResponse.json(e,{status:500})}}else{let e=u().join(process.cwd(),d.dT);try{let r=await l().readFile(e,"utf8");return i.NextResponse.json({viewComfyJSON:JSON.parse(r)})}catch(t){console.error("Files not found"),console.error(t);let r=[];await C(e)||r.push(d.u8);let o=new m.Gp({message:"ViewMode is missing files",errorType:m.ZB.VIEW_MODE_MISSING_FILES,errors:r}),s=E.getErrorResponse(o);return i.NextResponse.json(s,{status:500})}}}async function C(e){try{return await l().access(e),!0}catch{return!1}}let M=new t.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/playground/route",pathname:"/api/playground",filename:"route",bundlePath:"app/api/playground/route"},resolvedPagePath:"/home/ubuntu/vertical-fashion-project/app/api/playground/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:V,staticGenerationAsyncStorage:T,serverHooks:A}=M,U="/api/playground/route";function x(){return(0,a.patchFetch)({serverHooks:A,staticGenerationAsyncStorage:T})}},15058:(e,r,o)=>{o.d(r,{QC:()=>a,dT:()=>s,hc:()=>n,u8:()=>t});let s=process.env.VIEW_COMFY_FILE_NAME||"view_comfy.json",t=`The ${s} file is missing from the root of your project, 
or set the VIEW_COMFY_FILE_NAME environment variable to the right path.`,n=e=>`Cannot connect to ComfyUI using ${e}, make sure that you have a ComfyUI instance running and that the URL is correct 
or you can change the ComfyUI URL in the .env file using the variables COMFYUI_API_URL and if you're using SSL/TLS set COMFYUI_SECURE to true`,a=["seed","noise_seed","rand_seed"]},76072:(e,r,o)=>{var s;o.d(r,{EC:()=>a,GH:()=>n,Gp:()=>t,ZB:()=>s,yr:()=>p});class t{constructor(e){this.message=e.message,this.errorType=e.errorType,this.errors=e.errors||[]}}class n extends t{constructor(e){super({message:e.message,errorType:"ComfyWorkflowError",errors:e.errors})}}class a extends t{constructor(e){super({message:e.message,errorType:"ComfyError",errors:e.errors})}}class i{constructor(e){this.errorMsg=e.errorMsg,this.errorDetails=e.error,this.errorType=e.errorType}}class p{getErrorResponse(e){return new i(e.errorType?{errorMsg:e.message,error:e.errors,errorType:e.errorType}:e.cause&&e.cause.code?"ERR_INVALID_URL"===e.cause.code?{errorMsg:e.message,error:"Invalid API Endpoint",errorType:e.cause.code}:{errorMsg:e.message,error:e.cause.message,errorType:e.cause.code}:{errorMsg:"Something went wrong",error:e.message,errorType:"UnknownError"})}}!function(e){e.COMFY_WORKFLOW="ComfyWorkflowError",e.COMFY="ComfyError",e.UNKNOWN="UnknownError",e.VIEW_MODE_MISSING_FILES="ViewModeMissingFilesError",e.VIEW_MODE_MISSING_APP_ID="ViewModeMissingAppIdError",e.VIEW_MODE_TIMEOUT="ViewModeTimeoutError"}(s||(s={}))},69560:(e,r,o)=>{o.d(r,{g:()=>s});class s{isUserManagementEnabled(){return"true"===process.env.NEXT_PUBLIC_USER_MANAGEMENT}getViewComfyCloudApiUrl(){if(!process.env.VIEWCOMFY_CLOUD_API_URL)throw Error("VIEWCOMFY_CLOUD_API_URL is not set");return process.env.VIEWCOMFY_CLOUD_API_URL}getViewComfyCloudApiClientId(){return process.env.VIEWCOMFY_CLIENT_ID||""}getViewComfyCloudApiClientSecret(){return process.env.VIEWCOMFY_CLIENT_SECRET||""}}},49303:(e,r,o)=>{e.exports=o(30517)}};var r=require("../../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),s=r.X(0,[948,70,910],()=>o(26490));module.exports=s})();